<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <meta property="og:title" content="SciML: Open Source Software for Scientific Machine Learning"> <meta property="og:description" content="Open Source Software for Scientific Machine Learning"> <meta property="og:image" content="https://sciml.ai/assets/SciMLGitHubPreview.png"> <meta property="og:url" content="https://sciml.ai"> <meta name="twitter:title" content=SciML > <meta name="twitter:description" content="Open Source Software for Scientific Machine Learning"> <meta name="twitter:image" content="https://sciml.ai/assets/SciMLGitHubPreview.png"> <meta name="twitter:card" content=summary_large_image > <!-- Favicon--> <link rel=icon  type="image/x-icon" href="assets/favicon.png" /> <!-- Bootstrap icons--> <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel=stylesheet  type="text/css" /> <link rel=stylesheet  href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css"> <!-- Google fonts--> <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel=stylesheet  type="text/css" /> <!-- Core theme CSS (includes Bootstrap)--> <link href="./css/styles.css" rel=stylesheet  /> <link rel=stylesheet  href="/css/franklin.css"> <link rel=stylesheet  href="/css/styles.css"> <link rel=stylesheet  href="/css/hypertext.css"> <link rel=icon  href="/assets/favicon.png"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-90474609-2"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-90474609-2'); </script> <title>SciML Ecosystem Update: Better Error Messages, Compile Times, and Documentation</title> <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin=anonymous ></script> <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin=anonymous ></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin=anonymous ></script> <div class=container-fluid  id=top-alert > <div class="alert alert-dark alert-dismissible mb-0" role=alert > <p class=text-center > <a href="https://youtu.be/yHiyJQdWBY8">Check out the latest talk: "The Continuing Advancements of Scientific Machine Learning (SciML)"</a> </p> <!-- <button type=button  class=close  data-dismiss=alert  aria-label=Close > <span aria-hidden=true >&times;</span> --> </button> </div> </div> <header> <nav class="navbar navbar-expand-lg navbar-light"> <a class=navbar-brand  href="/">Home</a> <button class=navbar-toggler  type=button  data-toggle=collapse  data-target="#navbarSupportedContent" aria-controls=navbarSupportedContent  aria-expanded=false  aria-label="Toggle navigation"> <span class=navbar-toggler-icon ></span> </button> <div class="collapse navbar-collapse" id=navbarSupportedContent > <ul class="navbar-nav mr-auto"> <li class="nav-item active"> <a class=nav-link  href="https://docs.sciml.ai/">Documentation</a> <li class=nav-item > <a class=nav-link  href="/news/">News</a> <li class=nav-item > <a class=nav-link  href="/roadmap/">Roadmap</a> <li class=nav-item > <a class=nav-link  href="/citing/">Citing</a> <li class=nav-item > <a class=nav-link  href="/showcase/">Showcase</a> <li class=nav-item > <a class=nav-link  href="https://benchmarks.sciml.ai/">Benchmarks</a> <li class=nav-item > <a class=nav-link  href="https://github.com/SciML/">GitHub</a> <li class="nav-item dropdown"> <a class="nav-link dropdown-toggle" href="#" id=navbarDropdownMenuLink  role=button  data-toggle=dropdown  aria-haspopup=true  aria-expanded=false > Community </a> <div class=dropdown-menu  aria-labelledby=navbarDropdownMenuLink > <a class=dropdown-item  href="/community/">Community Home</a> <a class=dropdown-item  href="/governance/">Governance</a> <a class=dropdown-item  href="/challenge/">Challenges</a> <a class=dropdown-item  href="/dev/">Programs</a> </div> <li class=nav-item > <a class=nav-link  href="https://numfocus.org/donate-to-sciml"><i class="bi bi-heart"></i> Donate</a> </ul> </div> </nav> </header> <div class=franklin-content ><h1 id=sciml_ecosystem_update_better_error_messages_compile_times_and_documentation ><a href="#sciml_ecosystem_update_better_error_messages_compile_times_and_documentation" class=header-anchor >SciML Ecosystem Update: Better Error Messages, Compile Times, and Documentation</a></h1> <p>This release had a major focus on high-level user issues such as error messages, compile times, and documentation generation. Other related issues, such as code style enforcement, have also seen huge overhauls in this ecosystem update. From all of this, <strong>the documentation of SciML post summer 2022 has essentially been completely overhauled and improved&#33;</strong></p> <p><img src="https://user-images.githubusercontent.com/1814174/194701459-dc28d519-d49d-4f92-9c21-9a683536c12e.png" alt="Function definition error message" /></p> <p>With that, let&#39;s start showing some details&#33;</p> <h2 id=new_high_level_error_catching_better_error_messages ><a href="#new_high_level_error_catching_better_error_messages" class=header-anchor >New High Level Error Catching &#40;Better Error Messages&#33;&#41;</a></h2> <p>One of the major changes in this version of SciML is that high-level error messages have been introduced for many common issues. These give customized and context-dependent information to make it much easier to comprehend the pieces. For example, let&#39;s take a look at what happens if someone attempts to solve an incompatible ODE definition. Let&#39;s take the Lorenz equation, but with the issue of having too many arguments in the ODE definition:</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> OrdinaryDiffEq
<span class=hljs-keyword >function</span> lorenz!(du,u,a,b,c,t)
 du[<span class=hljs-number >1</span>] = a*(u[<span class=hljs-number >2</span>]-u[<span class=hljs-number >1</span>])
 du[<span class=hljs-number >2</span>] = u[<span class=hljs-number >1</span>]*(b-u[<span class=hljs-number >3</span>]) - u[<span class=hljs-number >2</span>]
 du[<span class=hljs-number >3</span>] = u[<span class=hljs-number >1</span>]*u[<span class=hljs-number >2</span>] - c*u[<span class=hljs-number >3</span>]
<span class=hljs-keyword >end</span>
u0 = [<span class=hljs-number >1.0</span>;<span class=hljs-number >0.0</span>;<span class=hljs-number >0.0</span>]
tspan = (<span class=hljs-number >0.0</span>,<span class=hljs-number >100.0</span>)
prob = ODEProblem(lorenz!,u0,tspan)
sol = solve(prob,Tsit5())</code></pre> <p>This is a common issue that we see from users coming from a MATLAB background, where &quot;add more arguments&quot; is the convention there. So what does the error look like:</p> <pre><code class="julia hljs">julia&gt; prob = ODEProblem(lorenz!,u0,tspan)
ERROR: All methods <span class=hljs-keyword >for</span> the model <span class=hljs-keyword >function</span> <span class=hljs-string >`f`</span> had too many arguments. For example,
an ODEProblem <span class=hljs-string >`f`</span> must define either <span class=hljs-string >`f(u,p,t)`</span> or <span class=hljs-string >`f(du,u,p,t)`</span>. This error
can be thrown <span class=hljs-keyword >if</span> you define an ODE model <span class=hljs-keyword >for</span> example as <span class=hljs-string >`f(du,u,p1,p2,t)`</span>.
For more information on the required number of arguments <span class=hljs-keyword >for</span> the <span class=hljs-keyword >function</span>
you were defining, consult the documentation <span class=hljs-keyword >for</span> the <span class=hljs-string >`SciMLProblem`</span> or
<span class=hljs-string >`SciMLFunction`</span> type that was being constructed.

A common reason <span class=hljs-keyword >for</span> this occurrence is due to following the MATLAB or SciPy
convention <span class=hljs-keyword >for</span> parameter passing, i.e. to add each parameter as an arguemnt.
In the SciML convention, <span class=hljs-keyword >if</span> you wish to pass multiple parameters, use a
<span class=hljs-keyword >struct</span> or other collection to hold the parameters. For example, here is the
parameterized Lorenz equation:

<span class=hljs-keyword >function</span> lorenz(du,u,p,t)
  du[<span class=hljs-number >1</span>] = p[<span class=hljs-number >1</span>]*(u[<span class=hljs-number >2</span>]-u[<span class=hljs-number >1</span>])
  du[<span class=hljs-number >2</span>] = u[<span class=hljs-number >1</span>]*(p[<span class=hljs-number >2</span>]-u[<span class=hljs-number >3</span>]) - u[<span class=hljs-number >2</span>]
  du[<span class=hljs-number >3</span>] = u[<span class=hljs-number >1</span>]*u[<span class=hljs-number >2</span>] - p[<span class=hljs-number >3</span>]*u[<span class=hljs-number >3</span>]
 <span class=hljs-keyword >end</span>
 u0 = [<span class=hljs-number >1.0</span>;<span class=hljs-number >0.0</span>;<span class=hljs-number >0.0</span>]
 p = [<span class=hljs-number >10.0</span>,<span class=hljs-number >28.0</span>,<span class=hljs-number >8</span>/<span class=hljs-number >3</span>]
 tspan = (<span class=hljs-number >0.0</span>,<span class=hljs-number >100.0</span>)
 prob = ODEProblem(lorenz,u0,tspan,p)

Notice that <span class=hljs-string >`f`</span> is defined with a single <span class=hljs-string >`p`</span>, an array which matches the definition
of the <span class=hljs-string >`p`</span> <span class=hljs-keyword >in</span> the <span class=hljs-string >`ODEProblem`</span>. Note that <span class=hljs-string >`p`</span> can be any Julia <span class=hljs-keyword >struct</span>.

Offending <span class=hljs-keyword >function</span>: f
Methods:
<span class=hljs-comment ># 1 method for generic function &quot;lorenz!&quot;:</span>
[<span class=hljs-number >1</span>] lorenz!(du, u, a, b, c, t) <span class=hljs-keyword >in</span> Main at REPL[<span class=hljs-number >2</span>]:<span class=hljs-number >1</span>

Stacktrace:
 [<span class=hljs-number >1</span>] isinplace(f::<span class=hljs-built_in >Function</span>, inplace_param_number::<span class=hljs-built_in >Int64</span>, fname::<span class=hljs-built_in >String</span>, iip_preferred::<span class=hljs-built_in >Bool</span>)
   @ SciMLBase C:\Users\accou\.julia\packages\SciMLBase\xWByK\src\utils.jl:<span class=hljs-number >185</span>
 [<span class=hljs-number >2</span>] isinplace(f::<span class=hljs-built_in >Function</span>, inplace_param_number::<span class=hljs-built_in >Int64</span>)
   @ SciMLBase C:\Users\accou\.julia\packages\SciMLBase\xWByK\src\utils.jl:<span class=hljs-number >177</span>
 [<span class=hljs-number >3</span>] ODEProblem(f::<span class=hljs-built_in >Function</span>, u0::<span class=hljs-built_in >Vector</span>{<span class=hljs-built_in >Float64</span>}, tspan::<span class=hljs-built_in >Tuple</span>{<span class=hljs-built_in >Float64</span>, <span class=hljs-built_in >Float64</span>}, p::SciMLBase.NullParameters; kwargs::Base.Pairs{<span class=hljs-built_in >Symbol</span>, <span class=hljs-built_in >Union</span>{}, <span class=hljs-built_in >Tuple</span>{}, <span class=hljs-built_in >NamedTuple</span>{(), <span class=hljs-built_in >Tuple</span>{}}})
   @ SciMLBase C:\Users\accou\.julia\packages\SciMLBase\xWByK\src\problems\ode_problems.jl:<span class=hljs-number >151</span>
 [<span class=hljs-number >4</span>] ODEProblem(f::<span class=hljs-built_in >Function</span>, u0::<span class=hljs-built_in >Vector</span>{<span class=hljs-built_in >Float64</span>}, tspan::<span class=hljs-built_in >Tuple</span>{<span class=hljs-built_in >Float64</span>, <span class=hljs-built_in >Float64</span>}, p::SciMLBase.NullParameters) (repeats <span class=hljs-number >2</span> times)
   @ SciMLBase C:\Users\accou\.julia\packages\SciMLBase\xWByK\src\problems\ode_problems.jl:<span class=hljs-number >150</span>
 [<span class=hljs-number >5</span>] top-level scope
   @ REPL[<span class=hljs-number >5</span>]:<span class=hljs-number >1</span></code></pre> <p>Lots of knowledge from common user issues and backgrounds was pulled from the <a href="https://discourse.julialang.org/">Julialang Discourse</a> in order to help identify where the misconceptions come from and give very detailed responses. We hope this makes the library a lot friendlier to newcomers.</p> <h2 id=faster_load_times_via_improved_precompilation ><a href="#faster_load_times_via_improved_precompilation" class=header-anchor >Faster Load Times via Improved Precompilation</a></h2> <p>This is a major change that has happened over the last year to change the compile times of first ODE solves from 30 seconds to 0.1. To find out more, read <a href="https://sciml.ai/news/2022/09/21/compile_time/">the compile time blog post</a>.</p> <h2 id=many_new_docstrings_in_scimlbasejl ><a href="#many_new_docstrings_in_scimlbasejl" class=header-anchor >Many New Docstrings in SciMLBase.jl</a></h2> <p>The high level interface functions, such as <code>solve</code>, <code>ODEProblem</code>, etc. have received greatly improved documentation. For example, if you run <code>?ODEProblem</code> in the REPL, you will now see the following:</p> <pre><code class="julia hljs">help?&gt; ODEProblem
search: ODEProblem RODEProblem SplitODEProblem DynamicalODEProblem IncrementingODEProblem SecondOrderODEProblem

  Defines an ordinary differential equation (ODE) problem. Documentation Page:
  https://diffeq.sciml.ai/stable/types/ode_types/

  Mathematical Specification of an ODE Problem
  ==============================================

  To define an ODE Problem, you simply need to give the <span class=hljs-keyword >function</span> f and the initial condition
  u_0 which define an ODE:

  M \frac{du}{dt} = f(u,p,t)

  There are two different ways of specifying f:

    •  f(du,u,p,t): <span class=hljs-keyword >in</span>-place. Memory-efficient when avoiding allocations. Best option <span class=hljs-keyword >for</span> most cases unless
       mutation is not allowed.

    •  f(u,p,t): returning du. Less memory-efficient way, particularly suitable when mutation is not allowed
       (e.g. with certain automatic differentiation packages such as Zygote).

  u₀ should be an <span class=hljs-built_in >AbstractArray</span> (or number) whose geometry matches the desired geometry of u.
  Note that we are not limited to numbers or vectors <span class=hljs-keyword >for</span> u₀; one is allowed to provide u₀ as
  arbitrary matrices / higher dimension tensors as well.

  For the mass matrix M, see the documentation of ODEFunction.

  Problem <span class=hljs-built_in >Type</span>
  ==============

  Constructors
  ––––––––––––––

  ODEProblem can be constructed by first building an ODEFunction or by simply passing the ODE right-hand side to the constructor. The constructors are:

    •  ODEProblem(f::ODEFunction,u0,tspan,p=NullParameters();kwargs...)

    •  ODEProblem{isinplace,specialize}(f,u0,tspan,p=NullParameters();kwargs...) : Defines the ODE with the
       specified functions. isinplace optionally sets whether the <span class=hljs-keyword >function</span> is inplace or not. This is
       determined automatically, but not inferred. specialize optionally controls the specialization level.
       See the specialization levels section of the SciMLBase documentation
       (https://scimlbase.sciml.ai/stable/interfaces/Problems/<span class=hljs-comment >#Specialization-Levels) for more details. The</span>
       default is AutoSpecialize.

  For more details on the <span class=hljs-keyword >in</span>-place and specialization controls, see the ODEFunction documentation.

  Parameters are optional, and <span class=hljs-keyword >if</span> not given then a NullParameters() singleton will be used which
  will throw nice errors <span class=hljs-keyword >if</span> you <span class=hljs-keyword >try</span> to index non-existent parameters. <span class=hljs-built_in >Any</span> extra keyword arguments
  are passed on to the solvers. For example, <span class=hljs-keyword >if</span> you set a callback <span class=hljs-keyword >in</span> the problem, then that
  callback will be added <span class=hljs-keyword >in</span> every solve call.

  For specifying Jacobians and mass matrices, see the ODEFunction documentation.

  Fields
  ––––––––

    •  f: The <span class=hljs-keyword >function</span> <span class=hljs-keyword >in</span> the ODE.

    •  u0: The initial condition.

    •  tspan: The timespan <span class=hljs-keyword >for</span> the problem.

    •  p: The parameters.

    •  kwargs: The keyword arguments passed onto the solves.

  Example Problems
  ==================

  Example problems can be found <span class=hljs-keyword >in</span> DiffEqProblemLibrary.jl
  (https://github.com/SciML/DiffEqProblemLibrary.jl).

  To use a sample problem, such as prob_ode_linear, you can <span class=hljs-keyword >do</span> something like:

  <span class=hljs-comment >#] add ODEProblemLibrary</span>
  <span class=hljs-keyword >using</span> ODEProblemLibrary
  prob = ODEProblemLibrary.prob_ode_linear
  sol = solve(prob)</code></pre> <p>The DifferentialEquations.jl documentation has been restructured to make use of these docstrings.</p> <h2 id=sciml_style_guide_and_formatting_enforcement ><a href="#sciml_style_guide_and_formatting_enforcement" class=header-anchor >SciML Style Guide and Formatting Enforcement</a></h2> <p>The entire SciML organization updated its practices to have a well-defined style guide called <a href="https://github.com/SciML/SciMLStyle">SciML Style</a> This style guide is comprehensive, covered high-level details such as whether to prefer the use of closures or not, to lower more mundane details like the proper style for continuing equations to the next line. It has quickly become one of the most widely used style guides for Julia packages. For more information, please check out the style guide&#39;s documentation.</p> <p>With this, all of the libraries now make use of JuliaFormatter.jl to automatically enforce style rules. When new changes are made to the repo, style enforcement is required, and for example contributors are required to run commands like:</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> JuliaFormatter
format(<span class=hljs-string >raw&quot;C:\Users\accou\.julia\dev\QuasiMonteCarlo&quot;</span>)</code></pre> <p>in order to reformat their code into the SciML style. This ensures that the code is more uniform across contributors, making it easier to read, understand, and contribute.</p> <h2 id=neuraloperatorsjl_fast_partial_differential_equation_solving_via_neural_networks ><a href="#neuraloperatorsjl_fast_partial_differential_equation_solving_via_neural_networks" class=header-anchor >NeuralOperators.jl: Fast Partial Differential Equation Solving via Neural Networks</a></h2> <p>The <a href="https://github.com/SciML/NeuralOperators.jl">NeuralOperators.jl</a> library has been added to the SciML ecosystem. This library covers techniques like Fourier Neural Operators, DeepONets, and more. We have demonstrated that these implementations outperformed the original ones by around 3x, and we believe there are many more tricks to employ to eek out a bit more performance as well. We plan to continue improving these techniques, along with integrating them into the <a href="https://github.com/SciML/NeuralPDE.jl">NeuralPDE.jl</a> physics-informed neural network &#40;PINN&#41; framework for physics-informed neural operator approaches. More on this coming soon&#33;</p> <h2 id=polychaosjl_polynomial_chaos_through_operator_overloading ><a href="#polychaosjl_polynomial_chaos_through_operator_overloading" class=header-anchor >PolyChaos.jl: Polynomial Chaos through Operator Overloading</a></h2> <p>The <a href="https://github.com/SciML/PolyChaos.jl">PolyChaos.jl</a> library has been incorporated into the SciML ecosystem to give fast and accurate polynomial chaos expansions through multiple dispatch, similar to ForwardDiff Dual numbers in some sense. This is then being used in other projects to make it easy to develop codes for model order reduction and uncertainty quantification. We are excited to ensure the maintenance and longevity of this crucial building block, and already have a planned package release which makes use of this functionality.</p> <!-- Footer--> <footer class="footer bg-light"> <div class=container > <div class=row > <div class="col-lg-6 h-100 text-center text-lg-start my-auto"> <ul class="list-inline mb-2"> <li class=list-inline-item ><a href="/community">Contact</a> <!-- <li class=list-inline-item ><a href="#!">Terms of Use</a> <li class=list-inline-item ><a href="#!">Privacy Policy</a> --> </ul> <p class="text-muted small mb-4 mb-lg-0">Website powered by <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia</a> programming language. &copy; SciML 2022. All Rights Reserved.</p> <p class="text-muted small mb-4 mb-lg-0">Edit on <a href="https://github.com/SciML/sciml.ai">GitHub</a></p> </div> <div class="col-lg-6 h-100 text-center text-lg-end my-auto"> <ul class="list-inline mb-0"> <li class="list-inline-item me-4"> <a href="https://github.com/SciML"><i class="bi-github fs-3"></i></a> <li class="list-inline-item me-4"> <a href="https://twitter.com/SciML_Org"><i class="bi-twitter fs-3"></i></a> <li class=list-inline-item > <a href="https://www.linkedin.com/company/the-julia-language"><i class="bi-linkedin fs-3"></i></a> </ul> </div> </div> </div> </footer> </div>